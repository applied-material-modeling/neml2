cmake_minimum_required(VERSION 3.28)
set(CMAKE_C_COMPILER_WORKS TRUE)
set(CMAKE_CXX_COMPILER_WORKS TRUE)
project(wasp)
include(ExternalProject)

ExternalProject_Add(
  wasp
  GIT_REPOSITORY https://code.ornl.gov/neams-workbench/wasp.git
  GIT_TAG ${VERSION}
  PREFIX ${PREFIX}
  UPDATE_DISCONNECTED TRUE
  CMAKE_ARGS
  -DCMAKE_C_COMPILER:STRING=${CMAKE_C_COMPILER}
  -DCMAKE_CXX_COMPILER:STRING=${CMAKE_CXX_COMPILER}
  -DCMAKE_CXX_FLAGS:STRING=-D_GLIBCXX_USE_CXX11_ABI=${GLIBCXX_USE_CXX11_ABI}
  -DCMAKE_BUILD_TYPE:STRING=${BUILD_TYPE}
  -DCMAKE_INSTALL_PREFIX:STRING=${INSTALL_PREFIX}
  -DCMAKE_POSITION_INDEPENDENT_CODE=ON
  -Dwasp_ENABLE_ALL_PACKAGES:BOOL=OFF
  -Dwasp_ENABLE_wasphit:BOOL=ON
  -Dwasp_ENABLE_testframework:BOOL=OFF
  -Dwasp_ENABLE_TESTS:BOOL=OFF
  -DBUILD_SHARED_LIBS:BOOL=OFF
  -DDISABLE_HIT_TYPE_PROMOTION:BOOL=ON
  TEST_EXCLUDE_FROM_MAIN ON
  LOG_DOWNLOAD ON
  LOG_CONFIGURE ON
  LOG_BUILD ON
  LOG_INSTALL ON
  LOG_OUTPUT_ON_FAILURE ON
)
